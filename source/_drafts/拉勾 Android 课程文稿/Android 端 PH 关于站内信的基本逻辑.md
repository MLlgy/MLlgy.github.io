# 1. 站内信一级页面:消息分类列表

## 1.1 消息分类列表

1. 进入站内信页面，从网络拉取数据，与上次操作的缓存数据进进行筛选比对(以消息的 `Id` 为判断条件)，将两次数据进行合并总的消息集合，以时间为标准进行降序排序;
2. 对集合进行处理，筛选出未被删除的消息，并将集合缓存到本地；
3. 以信息的 `title` 字段为标准，对消息集合进行分类，如果消息集合为空，则手动指定分类；
4. 将 `消息的分类结果` 以列表展示，根据每个分类下未读消息的条数，显示小红点，展示数据；


## 1.2 消息删除

1. 在消息分类列表页，左滑每个 Item，可以显示 `删除` 按钮，如果点击删除，则会在消息集合中将该分类所有的消息删除；
2. 将更新后的消息集合在本地进行缓存，并更新显示结果；

# 2. 站内信二级页面：消息列表

## 2.1 消息列表显示

1. 在 `消息分类列表页` 点击 `Item`，则会进入二级页面 -- 消息列表页；
2. 该分类下的所有消息将会被置位 `已读`，并更新消息集合；
3. 在该页面点击每个 Item，将会进入相应的页面详情页；

## 2.2 删除消息

1. 在消息列表页，如果左滑每条信息，则显示 `删除` 按钮，点击删除；
2. 在消息集合中，将该消息删除，并将更新信息集合；
3. 刷新消息页面，展示最新数据；

## 2.3 返回上一级页面

1. 返回上一级页面，携带最新的消息集合数据；
2. 对最新的数据进行显示；

# 3. 有可能存在的问题

因为现在删除的实现逻辑为本地删除，那么就会存在潜在问题：

情景模拟：

1. 网络拿到的数据为：1，2，3，4
2. 手动删除数据 2；
3. 再次请求会再次获得数据：1，2，3，4
4. 由于存在本地数据和网络数据的合并，会再次得到 1，2，3，4，造成数据没有删除；

由于现在没有数据，无法对网络获取的数据的逻辑进行验证，如果网络请求为一次性的，那么就不会存在以上问题。