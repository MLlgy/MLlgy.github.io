---
title: Linux 服务管理四--进程管理
tags:
---


### 何为进程

进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的 地址空间，并占用一定的系统资源。比如我们执行的命令：ls 等，其实在系统中也是一个运行的进程。


### 进程管理的作用


进程管理有以下作用：

* 判断服务器的健康状态
* 查看系统中的所有进程
* 杀死进程(但是一般不推荐采用此方法杀死进程，需要按照正常步骤杀死)



#### 查看所有进程


常用的命令：

> ps aux

或 

> ps -le

ps aux 执行命令的展示信息,默认以 CPU 的占用率自上而下排序：


* USER:该进程是由哪个用户产生的;
* PID:进程的ID号;
* %CPU:该进程占用CPU资源的百分比，占用越高，进程 越耗费资源;
* %MEM:该进程占用物理内存的百分比，占用越高，进程 越耗费资源;
*  VSZ:该进程占用虚拟内存的大小，单位KB;
* RSS:该进程占用实际物理内存的大小，单位KB;
* TTY:该进程是在哪个终端中运行的。其中tty1-tty7代表 本地控制台终端，tty1-tty6是本地的字符界面终端，tty7 是图形终端。pts/0-255代表虚拟终端。
* STAT:进程状态。常见的状态有:
    * R:运行
    * S:睡眠 
    * T:停止状态
    * s:包含子进程
    * +:位于后台
* START:该进程的启动时间
* TIME:该进程占用CPU的运算时间，注意不是系统时间  COMMAND:产生此进程的命令名



#### 查看系统健康状态


**命令：top**

选项:
* -d 秒数: 指定top命令每隔几秒更新。默认是3秒 在top命令的交互模式当中可以执行的命令:
* ?或h: 显示交互模式的帮助
* P: 以CPU使用率排序，默认就是此项
* M: 以内存的使用率排序
* N: 以PID排序
* q: 退出top



该命令主要展示了 ：
* 任务队列
* 进程线程
* CPU 信息
* 物理内存信息
* 磁盘信息

等其他信息，具体版本展示的信息有所不同，用时待查。

其中 ：load average: 0.00, 0.00, 0.00 ，系统在之前1分钟，5分钟，15分钟 的平均负载。一般认为小于 1 (此处 1 为单核情况，双核是为 2))时，负 载较小。如果大于1，系统已经超出 负荷。

**进程数：pstree [选项]**

选项:
* -p: 显示进程的PID
* -u: 显示进程的所属用户


### 终止进程

> kill –l

查看可用的进程信号


根据不同系统有不同内容：

示例：

> HUP INT QUIT ILL TRAP ABRT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM URG STOP TSTP CONT CHLD TTIN TTOU IO XCPU XFSZ VTALRM PROF WINCH INFO USR1 USR2


具体信息、代号与说明：


![](/../images/2019_09_26_01.png)


**重启进程：**

> kill -l 1234

**强制杀死进程**

> kill -9 1234

`-9` 即表示为具体的进程信号，朋友之前使用过 `-9`,今天终于知道其具体作用了，开心。

**killall 命令**


按照进程名杀死进程:
> killall [选项][信号] 进程名

选项:
* -i: 交互式，询问是否要杀死某个进程 
* -I: 忽略进程名的大小写

注意此处为 进程名，不是进程号，如杀死 httpd 应为：

> kill -9 httpd

**pkill 命令**
按照进程名终止进程
> pkill [选项] [信号] 进程名
选项:
* -t 终端号: 按照终端号踢出用户


具体使用示例：
1. 使用 `w` 命令查询本机已经登录的用户
2. 强制杀死从pts/1虚拟终端登录的进程

`pkill -t -9 pts/1`