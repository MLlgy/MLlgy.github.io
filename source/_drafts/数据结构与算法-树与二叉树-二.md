---
title: '数据结构与算法:树与二叉树(二):二叉树的存储'
tags:
---


## 二叉树的基本概念

给普通树添加限制，使每个树最多只能包含两个节点，并且严格区分左、右子节点（左右子节点不能颠倒顺序），那么这棵树称为二叉树。

* 二叉树为最大度树为 2 的树
* 二叉树的子节点有左、右之分，两者不能颠倒顺序
  
### 满二叉树

一棵深度为 k 的二叉树，如果它的子节点树为 `2^k - 1`，那么这棵二叉树称为满二叉树，满二叉树每层的结点数为 `2^(k-1)`。

![](/source/images/2019_12_17_02.png)

### 完全二叉树

一棵有 n 个节点的二叉树，按照满二叉树的编号方式对它进行编号，如所有节点和满二叉树 1~n 的编号完全一致，那么这棵树称为完全二叉树。

![](/source/images/2019_12_17_03.png)

满二叉树为特殊的完全二叉树。


## 二叉树的性质


* 二叉树第 i 层上的节点数最多为：2^(i-1)
* 对于完全二叉树，第 i 层的的第一个节点(如果有的话)编号为 2^(i-1)
* 深度为 k 的满二叉树包含的节点树为：2^k -1
* 在任意一棵二叉树中，如果叶子节点的数量为 n0，度为 2 的子节点数量为 n2，则由 n0 = n2 + 1
* 具有 n 个节点的完全二叉树的深度为： log(2^n)+ 1
* 对一棵有 n 个节点完全二叉树的所有节点自左向右编号(1~n)，对于任一编号为 i(n>=i>=1) 的节点有以下性质。

    * 当 n== 1 时，节点 i 是二叉树的根；若 i>1,则节点的父节点为 i/2
    * 若 2i <= n，则节点 i 有左孩子，左孩子的编号为 2i，否则无左孩子，并且是叶子节点。
    * 若 2i + 1 < n，则节点 i 有右孩子，右孩子的编号我 2i+1；否则，节点无右孩子。
* 对于一棵有 n 个节点的完全二叉树，从左向右编号，1~n/2 范围的节点都是有孩子节点的非叶子节点，其余的节点为叶子节点。编号为 n/2 的节点可能只有左子节点，也可能有左、右两个子节点。


## 二叉树的操作


二叉树的 每个节点最多只有两个子节点。


* 返回指定节点（非根结点）的父节点
* 返回指定节点（非叶子节点）的左、右子节点
* 返回指定节点的位置


二叉树的存储结构：

* 顺序存储：底层通过数组记录二叉树的所有节点
* 二叉树链表存储：每个节点维护一个 left、right 变量，分别指向其左、右子节点
* 三叉树链表存储：每个节点维护一个 left、right、parent 变量。分别指向其左、右子节点和父节点


## 二叉树的顺序存储


二叉树的顺序存储主要利用了满二叉树第 i 层的节点数为 2^(i-1)，一个深度为 k 的二叉树最多包含的子节点数为：2^k - 1，因此二叉树的顺序存储只要定义一个长度为2^k - 1 数组，即可以存储这棵二叉树了。

对于非满二叉树，那些空出来的节点对应的数组元素留空就可以了，由此可见二叉树的顺序存储会对空间造成一定的浪费。




![](/source/images/2019_12_18_01.png)


如图是一个只有右子节点的数。

![](/source/images/2019_12_18_02.png)



那么对于顺序存储，在数组中子节点只填充了数组的几个元素（蓝色），大部分的存储位置被浪费。


二叉树的顺序存储核心思想就是将不同的节点存入数组的不同位置，并且就如上图所示，不同层的所有节点存储在连续的内存空间。

对于这种顺序存储的二叉树，不管是遍历树中节点，还是查找树中节点，都可以十分高兴的高效的完成，但是唯一的缺点就是空间浪费很大。


## 二叉树的二叉链表存储

二叉链表存储的核心思想：

    让每个节点都记住它的左、右子节点，这样的话为每个节点增加 left、right 两个变量，分别指向左右两个子节点的引用。

二叉链表存储方式对二叉树进行存储，当为指定节点添加子节点是十分方便的，只要让父节点的 left、right 指向新的节点即可。


通过二叉树链表存储树，避免了顺序存储时的空间利用率小的问题，但是这种方式遍历树节点的效率十分低，寻找指定节点的父节点必须要遍历整棵树，实现起来比较困难，为了克服二叉树链表存储方式中访问父节点效率过低的情况，将二叉树表扩展成三叉树链表。


## 二叉树的三叉链表存储


二叉树的三叉链表存储方式，每个节点需要维护 parent、left、right 单个变量，分别指向父节点、左右子节点。


三叉链表存储是对二叉链表存储的改进，这样可以很方便的实现向上和向下遍历。