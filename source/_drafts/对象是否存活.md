---
title: 判断 Java 对象是否存活
tags:
---

此处的对象为 Java 堆中的对象。


目前主流的语言都是采用的可达性分析来判定对象是否存活。

这个算法需要一系列称为 `GC Roots` 的对象作为起点，从这个节点开始向下搜索，搜索走过的路径称为 **引用链 (Reference Chain)** ，我们使用 LeakCanary 中看到的 Trace 图就是引用链的图形化表示。

当一个对象到 GC Roots 没有任何引用链，也就是这个对象到 GC Roots 的路径是不可达的，那么就证明这个对象是不可用的，判定为可回收的对象。


在 Java 中可以作为 GC Roots 的对象有以下几种：

* 虚拟机栈(栈帧中的本地变量表)中的引用对象
* 方法区中的静态属性引用的对象
* 方法区中常量引用的对象
* 本地方法栈中 JNI(Native) 引用的对象



根据对象不同的引用类型，可以分为强可达、软可达(只能通过软引用获得对象的状态)、弱可达、幻象可达、不可达(被回收)。



----

[面试官:你说你熟悉jvm?那你讲一下并发的可达性分析](https://zhuanlan.zhihu.com/p/108706654)