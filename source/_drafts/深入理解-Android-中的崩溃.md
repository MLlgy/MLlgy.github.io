---
title: 深入理解 Android 中的崩溃
tags:
---

## Java ANR


## 分析应用崩溃

崩溃现场记录了很多有价值的信息，可以在崩溃现场查看如下信息：

1. 崩溃信息

这是能直观看到的崩溃信息，从崩溃信息中，可以对崩溃有一个基本的判断。在崩溃信息中，可以找寻以下关键信息。

* 进程名、线程名。

崩溃的进程是前台进程还是后台进程，是不是发生在 UI 线程。

* 崩溃堆栈和类型。

判断崩溃是 Java 崩溃、Native 崩溃、ANR。对于不同崩溃的关注点不同。需要特别关注栈顶信息，可以基本判断崩溃发生在自己的代码，还是系统代码。


2. 系统信息

* Logcat


主要包括应用运行日志和系统运行日志，在 AS 中的 Logcat 由于系统权限，可能只包含与当前 App 相关的。系统的 event-logcat 会记录 App 运行的基本情况，记录文件为 /system/etc/event-log-tags。

* 机型、系统、厂商、CPU、ABI、Linux 版本等。

* 设备状态：是否 root、是否是模拟器

3. 内存信息


* 系统剩余内存

系统内存状态：/proc/meminfo

* 应用使用内存




---

native 崩溃

当程序中的 native 代码发生崩溃时，系统会在 /data/tombstones/ 目录下保存一份详细的崩溃日志信息