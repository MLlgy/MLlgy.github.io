---
title: 性能优化之工具
tags:
---


### 基础知识


CPU 时间：

    
* 用户时间：执行用户态代码消耗的时间。
* 系统时间：执行内核态系统调用消耗的时间。


#### CPU 时间



### Android 卡顿排查工具

分类：

* instrument: 获取一段时间所有函数的调用过程，分析这段时间内的函数调用过程，因一部分析待优化的点。

* sample：使用有选择性或抽样方式观察某些函数的调用过程，从这些有限的信息中推测出流程中可疑的点，然后继续细化分析。



### Systrace

Systrace是一个收集和检测时间信息的工具, 它能显示CPU和时间被消耗在哪儿了, 每个进程和线程都在其CPU时间片内做了什么事儿. 而且会指示哪个地方出了问题, 以及给出Fix建议.

https://zhuanlan.zhihu.com/p/27331842

[面试Tip之Android优化工具Systrace](https://www.wanandroid.com/blog/show/2184)


### MAT 

[Android进阶——性能优化之MAT的使用](https://blog.csdn.net/qq_30379689/article/details/102616657#comments)


### TraceView

一个图形化的工具, 用来展示和分析方法的执行时间.

在发现某个页面或者操作会卡顿时，可以使用 TraceView 定位问题代码。
比如启动，加载图片列表卡顿等情况。

用途：检测卡顿(通过查看方法执行的时间来发现卡顿原因，以此进行解决)

```

public class MainActivity extends Activity {
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);
		Debug.startMethodTracing();
	}
 
	@Override
	protected void onDestroy() {
		super.onDestroy();
		Debug.stopMethodTracing();
	}
}
```

项目目录中会生成相应的 .trace文件，



[使用 TraceView 找到卡顿的元凶以及 StrictMode 优化代码逻辑](https://mp.weixin.qq.com/s/zc5yAsCZYYz3-XbvLoRNmg)

* StrictMode(代码逻辑优化)
  

用来检测在 UI 线程中执行的不规范操作，比如进行磁盘读写、网络操作等

为了在开发中发现这些容易忽略的问题，我们使用StrictMode，**系统检测出主线程违例的情况并做出相应的反应**，最终帮助开发者优化和改善代码逻辑。

### 另一个Android性能剖析工具——simpleperf
[另一个Android性能剖析工具——simpleperf](https://juejin.im/entry/5aa24adc5188255574594c1c)


--

[Android App 优化之性能测试分析工具](https://juejin.im/entry/57ba7ceb79bc440063a1759c)