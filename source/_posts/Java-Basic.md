---
title: Java Basic
date: 2019-03-06 14:31:33
tags: [Java 继承，对象]
---

### 对象的三大特征

对象的三种基本特征:继承、封装、多态。

Java 语言为纯粹的面向对象的程序编程语言，主要表现为 Java 完全支持对象的三大基本特征。

封装： 将对象的实现细节隐藏起来，然后通过一些公用方法暴露该对象的功能。

**继承**：子类继承父类，子类作为一种特殊的父类，将直接获得父类的属性和方法。

多态：子类对象可以直接赋给父类变量，但在运行时依然表现出子类的行为特征，这意味着同一个类型的引用对象在执行同一个方法时，可能表现出多种行为特征。 
```
// B 继承 A
A a;
a = new A();
a.testMethod();// 执行 A 中方法
a = new B();
a.testMethod();// 执行 B 中方法
```

#### Java 是静态的强类型的语言


Java 是静态的，一旦一个类被定义，如果对这个类有所更改，只要不重新编译这个类，那么这个类以及这个类拥有的成员变量就不会发生改变。

Java 的强类型主要表现在两方面：
1. 所有的变量必须先声明后使用；
2. 指定类型的变量只能赋相同类型的值；

基于上面，Java 在编译期就会确定成员变量的类型。

 ### 变量
 
**编程的本质就是对内存中的数据访问和修改**，程序所用到的数据都会保存在内存中，程序员需要通过一种机制来访问和修改内存中的数据，这种机制就是 **变量** ，每个变量代表某一小块内存。变量是有名字的，程序对变量 **赋值**，就是把数据装入该变量所代表的内存区的过程；程序 **读取变量**，就是从变量代表的内存区取值的过程。可以简单的理解：变量相当于一个有名称的容器，该容器用于装各种不同类型的数据。


###  对象和引用

![对象与引用](/images/19_03_06.jpg)

```
Person p = new Person("Mike",20)
```
由上文中变量是需要是需要内存存储数据的，此语句中 `new Person("Mike",20)` 只是在堆内存中开辟出一块内存去存储这个对象，而 `Person p` 则需要在栈内存中开辟一块内存来存储变量以及相关内容，至于在此区域存储的到底是什么需要在赋值后才会具体化。在此例中，赋值语句后，变量 p 对应的栈内存存储的为新建对象 -- new Person 的内存地址。

### this

首先 this 代表一定是个对象，其次 this 出现在不同位置含义有所不同：
* 在构造器中代表正在初始化的对象
* 在方法中代码调用该方法的对象

因此 static 方法中不能出现 this，因为 static 的方法属于类，也是通过类去调用，违背了 this 代表的为一个对的前提。
同时 static 方法不可调用非 static 变量和方法也是基于这个原因，因为类中的变量和方法存在隐式的 this 引用，即为 this 作为调用者，this 代表的对象在上文已经表达。

### 方法重载

方法名相同，而参数列表不同的现象称为方法重载。

* 为什么返回值不作为方法重载的区分标准？

**Java 调用方法时可以忽略返回值**，如果将返回值作为重载的标准，那么存在以下情况：

```
int method();
void method()

void test(){
    method();
}
```
此时 Java 系统将不能分辨出 test 方法中调用的 method() 是具体哪一个方法。

### 变量及其运行机制

成员变量：
1. 类变量：从类的准备阶段开始存在，到系统完全销毁这个类。
2. 实例变量：从实例的创建始存在，到系统完全销毁这个实例。


局部变量：
1. 形参
2. 方法内局部变量
3. 代码块中局部变量

局部变量只要离开了相应的代码块(方法、代码块)，局部变量就会被销毁。


### 成员变量的初始化和内存中的运行机制

JVM 加载类经历以下几个阶段：
1. 类加载
2. 类验证
3. 类准备
4. 类解析
5. 类初始化

当系统加载类或创建类实例时，系统会自动为成员变量分配内存，并赋初值。
Person 类如下：
```
class Person{
    private static int phone;
    private String name;
}

// Person 类使用
Person a = new Person();
a.phone = 110;
a.name = "mike";
```
当执行 `Person a = new Person();` 时，如果程序中第一使用 Person 类， JVM 将会加载 Person 类，并初始化这个类。在类的准备阶段，JVM 将会该类的类变量分配内存空间并初始化。当 Person 类初始化完成后，系统中的内存情况如下图：

![类初始化](images/2019_03_03_1.jpg)

当类完成初始化后，JVM 将在 堆内存 中为 Person 类分配一块内存(JVM 会为Person类创建一个对象)，这块内存区包含了类变量 phone 的内存，并初始化它的初值。

接着，系统创建一个 Person 对象，并把这个对象赋值给 p 变量， Person 对象中包含了实例变量--name，实例变量在创建实例时分配内存空间并赋初值。JVM 创建了第一个 Person 对象后，内存分配情况如下：

![实例变量初始化](images/2019_03_03_2.jpg)

当再次创建 Person 对象时，不需要再对 Person 类初始化。



